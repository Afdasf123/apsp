<section class="bg-gray-800/50 border border-gray-700 rounded-lg shadow-lg min-h-[400px] flex flex-col">
  <header class="flex items-center justify-between p-3 border-b border-gray-700">
    <h3 class="text-sm font-semibold text-gray-300">Generated Code Output</h3>
    @if (code() && !isLoading()) {
      <div class="flex items-center gap-2">
        <button (click)="copyCode()" class="inline-flex items-center gap-1.5 text-xs font-medium text-gray-400 hover:text-white transition-colors px-2 py-1 rounded-md hover:bg-gray-700">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" /></svg>
          {{ copyButtonText() }}
        </button>
        <button (click)="runCode()" class="inline-flex items-center gap-1.5 text-xs font-medium text-gray-400 hover:text-white transition-colors px-2 py-1 rounded-md hover:bg-gray-700">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
          Run Code
        </button>
        <button (click)="saveSnippet()" class="inline-flex items-center gap-1.5 text-xs font-medium text-gray-400 hover:text-white transition-colors px-2 py-1 rounded-md hover:bg-gray-700">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z" /></svg>
          Save Snippet
        </button>
      </div>
    }
  </header>
  
  <div class="p-4 flex-grow overflow-auto bg-gray-900 rounded-b-lg">
    @if (isLoading()) {
      <div class="animate-pulse space-y-3">
        <div class="h-4 bg-gray-700 rounded w-3/4"></div>
        <div class="h-4 bg-gray-700 rounded w-1/2"></div>
        <div class="h-4 bg-gray-700 rounded w-5/6"></div>
        <div class="h-4 bg-gray-700 rounded w-2/3"></div>
        <div class="h-4 bg-gray-700 rounded w-3/4"></div>
        <div class="h-4 bg-gray-700 rounded w-1/2"></div>
      </div>
    } @else if (hasError()) {
      <div class="flex flex-col items-center justify-center h-full text-center">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 text-red-500 mb-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
        <h4 class="text-lg font-semibold text-red-400">An Error Occurred</h4>
        <p class="text-sm text-gray-400 mt-1">{{ errorMessage() }}</p>
      </div>
    } @else if (code()) {
      <pre><code class="text-sm font-mono text-cyan-300 whitespace-pre-wrap break-words">{{ code() }}</code></pre>
    } @else {
      <div class="flex flex-col items-center justify-center h-full text-center text-gray-500">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 mb-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4" /></svg>
        <h4 class="text-lg font-semibold">Your generated code will appear here</h4>
        <p class="text-sm">Enter a prompt above and click "Generate Code" to start.</p>
      </div>
    }
  </div>
</section>